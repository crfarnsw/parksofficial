<%@ Page Title="Events" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="Events.aspx.cs" Inherits="csi3370parksofficial.Events" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <div class="container">
        <h1>Events <small>Your park's events</small></h1> 
        <hr/>
        <div class="row">
            <asp:HyperLink runat="server" id="btnBack" CssClass="btn btn-link" Text="Back to Search" NavigateUrl="Search.aspx"></asp:HyperLink>
            <br/>
            <asp:LinkButton runat="server" id="btnAddEvent" CssClass="btn btn-link" text="Add an event for this park" OnClick="btnAddEvent_OnClick"></asp:LinkButton>
        
            <asp:FormView runat="server" ID="addEventForm"
                Visible="False"
                CssClass="table table-bordered"
                ItemType="csi3370parksofficial.Models.Event"
                InsertMethod="InsertEvent" 
                DefaultMode="Insert"
                OnCallingDataMethods="gvEvents_OnCallingDataMethods"
                RenderOuterTable="True" 
                OnItemInserted="addEventForm_OnItemInserted">
                <InsertItemTemplate>
                    <table>
                        <tr>
                        <th>
                            EventName:
                        </th>
                            <th>
                                
                                EventDate:
                            </th>
                        </tr>
                        <tr>
                            <td>
                                <asp:DynamicControl DataField="EventName" Mode="Insert" runat="server"/>
                            </td><td>
                                <asp:DynamicControl DataField="EventDate" Mode="Insert" runat="server"/>
                            </td>
                        </tr>
                    </table>
                    <asp:Button runat="server" Text="Insert" CommandName="Insert" />
                    <asp:Button runat="server" Text="Cancel" CausesValidation="false" OnClick="cancelButton_Click" />
                </InsertItemTemplate>
            </asp:FormView>
        </div>
        <br/>
        <div class="row">
            <asp:GridView runat="server" 
                          id="gvEvents"
                Visible="True"
                          ItemType="csi3370parksofficial.Models.Event"
                          OnCallingDataMethods="gvEvents_OnCallingDataMethods"
                          SelectMethod="GetEvents" 
                          DataKeyNames="EventID"
                DeleteMethod="DeleteEvent"
                AutoGenerateDeleteButton="True"
                AutoGenerateColumns="False"
                CssClass="table table-bordered table-striped"
                          EmptyDataText="No events">
                <Columns>
                    
                    <asp:BoundField HeaderText="Event Name" DataField="EventName"/>
                    <asp:BoundField HeaderText="Event Date" DataField="EventDate" DataFormatString="{0:MM/dd/yyyy}"/>
                </Columns>
            </asp:GridView>
        </div>
    </div>
</asp:Content>
